Сущность базы данных
====================

Финал - необходимо заставить **Cheapy** работать с реальными данными

Объявление
----------

Каждое свойство описанной сущности работает с одноименной колонкой в таблице с таким же именем, как и у сущности

Создадим сущность в папке :code:`src/DataMap/`, которая опишет продукт:

.. code-block:: PHP

    <?php

    // src/DataMap/Product.php

    class Product extends AbstractDataMap
    {
        public string $name;
    }

.. important:: Учтите, что не требуется указывать свойство :code:`id`, потому что данная колонка - автоинкрементируемая

Использование
-------------

Работа с сущностями базы данных происходит через :code:`DataMapHandler`. Инициализация обработчика не происходит
автоматически, потому что не каждому эндпоинту необходима база данных.

.. important:: Пожалуйста, используйте DI контейнер для получения экземляров необходимых для работы компонентов

Давайте получим экземпляр обработчика и получим объект из базы данных по его :code:`id`:

.. code-block:: PHP

    <?php

    // some controller file

    // some attributes
    public function getProductById(DataMapHandlerInterface $dmh): void
    {
        $product = $dmh->setMap(Product::class)->getById(1);

        // some code
    }